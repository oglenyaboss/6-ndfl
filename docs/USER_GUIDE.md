# Подробное руководство пользователя 6-НДФЛ

## Содержание

- [Введение](#введение)
- [Первый запуск](#первый-запуск)
- [Интерфейс приложения](#интерфейс-приложения)
- [Работа с отчетами 6-НДФЛ](#работа-с-отчетами-6-ндфл)
- [Работа с уведомлениями](#работа-с-уведомлениями)
- [Функции обработки](#функции-обработки)
- [Примеры использования](#примеры-использования)
- [Частые вопросы](#частые-вопросы)
- [Решение проблем](#решение-проблем)

## Введение

6-НДФЛ — это веб-приложение для обработки и корректировки XML-файлов налоговой отчетности. Приложение позволяет:

- Исправлять ошибки в отчетах 6-НДФЛ
- Корректировать данные о доходах и налогах
- Объединять несколько отчетов
- Сортировать и упорядочивать данные
- Работать с уведомлениями

### Для кого предназначено

- Бухгалтеры и финансовые специалисты
- Сотрудники кадровых служб
- Специалисты по налогообложению
- Разработчики интеграций с 1С

### Что вам потребуется

- Веб-браузер (Chrome, Firefox, Safari, Edge)
- XML-файлы отчетов 6-НДФЛ из 1С
- Базовые знания работы с налоговыми отчетами

## Первый запуск

### 1. Открытие приложения

1. Откройте веб-браузер
2. Перейдите по адресу: `http://localhost:3000`
3. Дождитесь загрузки главной страницы

### 2. Знакомство с интерфейсом

При первом запуске вы увидите главную страницу с:
- Заголовком "6-ndfl"
- Кнопкой "Загрузите файл" в центре
- Текстом "или уведомления" под кнопкой
- Переключателем версий "V1" в правом верхнем углу

### 3. Выбор версии интерфейса

Приложение предлагает два варианта интерфейса:
- **Версия 1**: Классический интерфейс с базовой функциональностью
- **Версия 2**: Современный интерфейс с визуальными эффектами

Для переключения используйте переключатель в правом верхнем углу.

## Интерфейс приложения

### Версия 1 (Классический интерфейс)

**Главная страница:**
- Простой дизайн с фокусом на функциональности
- Кнопка загрузки файла
- Минимальные анимации

**Рабочее пространство:**
- Вкладки для различных функций
- Таблица с данными
- Кнопки действий

### Версия 2 (Современный интерфейс)

**Главная страница:**
- Темная тема с визуальными эффектами
- Анимированные элементы
- Эффекты света и частиц

**Рабочее пространство:**
- Стильные вкладки с эффектами
- Интерактивные элементы
- Улучшенная визуализация данных

## Работа с отчетами 6-НДФЛ

### Загрузка отчета

1. **Подготовка файла**
   - Экспортируйте XML-файл из 1С
   - Убедитесь, что файл в формате 6-НДФЛ версии 6.2
   - Проверьте, что файл не поврежден

2. **Загрузка в приложение**
   - Нажмите кнопку "Загрузите файл"
   - Выберите XML-файл на вашем компьютере
   - Дождитесь обработки файла

3. **Проверка загрузки**
   - После загрузки появится интерфейс с вкладками
   - Проверьте, что данные отображаются корректно
   - Убедитесь, что нет ошибок в консоли браузера

### Просмотр данных

После загрузки отчета вы увидите:

**Таблица данных:**
- ФИО сотрудников
- ИНН
- Данные о доходах по месяцам
- Исчисленный и удержанный налог
- Номера справок

**Элементы управления:**
- Поиск по данным
- Сортировка столбцов
- Фильтрация записей
- Пагинация (если много записей)

### Навигация по вкладкам

Интерфейс разделен на несколько вкладок:

1. **Налог** - корректировка налоговых данных
2. **Доход** - исправление данных о доходах
3. **Корректировка** - работа с номерами корректировок
4. **Объединение** - слияние документов
5. **Загрузка** - операции с файлами
6. **Прочее** - дополнительные функции

## Работа с уведомлениями

### Загрузка уведомлений

1. **Выбор типа данных**
   - На главной странице нажмите "или уведомления"
   - Выберите XML-файлы уведомлений
   - Можно выбрать несколько файлов одновременно

2. **Обработка данных**
   - Дождитесь обработки файлов
   - Прокрутите страницу вниз для просмотра данных
   - Данные отобразятся в табличном виде

### Экспорт уведомлений

1. **Просмотр данных**
   - Просмотрите обработанные данные в таблице
   - Проверьте корректность информации

2. **Сохранение в CSV**
   - Нажмите кнопку "Скачать CSV"
   - Выберите место для сохранения файла
   - Файл будет сохранен в формате CSV

## Функции обработки

### Вкладка "Налог"

#### Выровнять налог
**Назначение:** Устанавливает налог 13% от налоговой базы

**Когда использовать:**
- Когда исчисленный налог не соответствует 13% от дохода
- При несоответствии в расчетах 1С
- Для приведения к стандартной ставке

**Как использовать:**
1. Перейдите на вкладку "Налог"
2. Нажмите кнопку "Выровнять налог"
3. Дождитесь обработки
4. Проверьте результат в таблице

**Пример:**
```
До обработки:
Доход: 100,000 руб.
Исчисленный налог: 10,000 руб.

После обработки:
Доход: 100,000 руб.
Исчисленный налог: 13,000 руб.
```

#### Выровнять удержанный
**Назначение:** Приравнивает удержанный налог к исчисленному

**Когда использовать:**
- Когда удержанный налог не равен исчисленному
- При ошибках в расчетах удержаний
- Для устранения расхождений

**Как использовать:**
1. Нажмите "Выровнять удержанный"
2. Проверьте изменения в колонке "Удержанный налог"

### Вкладка "Доход"

#### Выровнять доход
**Назначение:** Исправляет проблемы с доходами

**Что делает:**
- Удаляет записи с отрицательными доходами
- Удаляет записи с нулевыми доходами
- Если нет дохода в январе, переносит 30% от февраля

**Пример обработки:**
```
До обработки:
Январь: -5,000 руб.
Февраль: 50,000 руб.
Март: 0 руб.

После обработки:
Январь: 15,000 руб. (30% от февраля)
Февраль: 50,000 руб.
Март: запись удалена
```

### Вкладка "Корректировка"

#### Корректировка
**Назначение:** Устанавливает номер корректировки

**Как использовать:**
1. Введите номер корректировки (0-99) в поле
2. Нажмите кнопку "Корректировка"
3. Номер будет установлен для всех справок

**Применение:**
- Для подачи корректирующих отчетов
- При исправлении ошибок в поданных отчетах

#### Аннулирующий
**Назначение:** Создает аннулирующую корректировку

**Что делает:**
- Обнуляет все доходы в справках
- Устанавливает соответствующий номер корректировки
- Сохраняет структуру документа

**Когда использовать:**
- При полной отмене поданного отчета
- При радикальных изменениях в данных

### Вкладка "Объединение"

#### Объединить
**Назначение:** Объединяет два XML-отчета в один

**Пошаговая инструкция:**
1. Загрузите первичный отчет (кликните "первичный")
2. Загрузите вторичный отчет (кликните "вторичный")
3. Нажмите кнопку "Объединить"
4. Дождитесь обработки

**Логика объединения:**
- Шапка документа берется из первичного отчета
- Справки объединяются по ИНН и ФИО
- Дублирующиеся записи игнорируются
- Нумерация справок корректируется

**Пример:**
```
Первичный отчет: 100 справок
Вторичный отчет: 50 справок
Совпадений: 20 справок

Результат: 130 уникальных справок
```

#### Очистить
**Назначение:** Сбрасывает выбранные для объединения файлы

### Вкладка "Загрузка"

#### Очистить отчет
**Назначение:** Удаляет текущий отчет и возвращает к начальному экрану

**Когда использовать:**
- Для загрузки нового отчета
- При ошибке в загруженном файле
- Для начала работы с другим документом

#### Скопировать отчет
**Назначение:** Копирует XML-код отчета в буфер обмена

**Как использовать:**
1. Нажмите кнопку "Скопировать отчет"
2. XML-код будет скопирован в буфер обмена
3. Вставьте код в текстовый редактор или другое приложение

#### Скачать отчет
**Назначение:** Сохраняет обработанный XML-файл

**Процесс:**
1. Нажмите "Скачать отчет"
2. Выберите место для сохранения
3. Файл будет сохранен в кодировке windows-1251

### Вкладка "Прочее"

#### Исправить нумерацию справок
**Назначение:** Устанавливает последовательную нумерацию

**Что делает:**
- Присваивает справкам номера 1, 2, 3, ...
- Корректирует дублирующиеся номера
- Сохраняет порядок записей

#### Исправить порядок справок
**Назначение:** Сортирует справки по алфавиту

**Критерии сортировки:**
1. Фамилия
2. Имя
3. Отчество

## Примеры использования

### Пример 1: Базовая обработка отчета

**Задача:** Подготовить отчет 6-НДФЛ для подачи в налоговую

**Шаги:**
1. Загрузите XML-файл из 1С
2. Перейдите на вкладку "Доход"
3. Нажмите "Выровнять доход"
4. Перейдите на вкладку "Налог"
5. Нажмите "Выровнять налог"
6. Перейдите на вкладку "Прочее"
7. Нажмите "Исправить порядок справок"
8. Нажмите "Исправить нумерацию справок"
9. Сохраните отчет

### Пример 2: Подача корректировки

**Задача:** Подать корректировку №1 к ранее поданному отчету

**Шаги:**
1. Загрузите исходный отчет
2. Внесите необходимые изменения данных
3. Перейдите на вкладку "Корректировка"
4. Введите "1" в поле номера корректировки
5. Нажмите "Корректировка"
6. Сохраните отчет

### Пример 3: Объединение отчетов

**Задача:** Объединить отчеты двух подразделений

**Шаги:**
1. Загрузите отчет первого подразделения
2. Перейдите на вкладку "Объединение"
3. Загрузите отчет первого подразделения как "первичный"
4. Загрузите отчет второго подразделения как "вторичный"
5. Нажмите "Объединить"
6. Проверьте результат
7. Сохраните объединенный отчет

### Пример 4: Обработка уведомлений

**Задача:** Проанализировать уведомления и экспортировать в Excel

**Шаги:**
1. На главной странице нажмите "или уведомления"
2. Выберите файлы уведомлений (можно несколько)
3. Дождитесь обработки
4. Прокрутите вниз для просмотра данных
5. Нажмите "Скачать CSV"
6. Откройте CSV-файл в Excel для дальнейшей обработки

## Частые вопросы

### Общие вопросы

**Q: Какие форматы файлов поддерживает приложение?**
A: Приложение работает только с XML-файлами формата 6-НДФЛ версии 6.2, экспортированными из 1С.

**Q: Можно ли обрабатывать файлы других версий НДФЛ?**
A: Нет, приложение оптимизировано только для версии 6.2.

**Q: Сохраняются ли данные после закрытия браузера?**
A: Нет, все данные хранятся только в памяти браузера и удаляются при закрытии.

### Технические вопросы

**Q: Почему не загружается XML-файл?**
A: Проверьте:
- Файл не поврежден
- Файл в кодировке windows-1251
- Файл соответствует формату 6-НДФЛ 6.2
- Размер файла не превышает 10MB

**Q: Что делать, если данные отображаются некорректно?**
A: 
- Обновите страницу
- Проверьте кодировку файла
- Убедитесь, что файл экспортирован из 1С правильно

**Q: Можно ли отменить выполненную операцию?**
A: Нет, функция отмены не реализована. Рекомендуется сохранять копии файлов.

### Функциональные вопросы

**Q: Как понять, что обработка завершена?**
A: Обработка завершена, когда:
- Исчезает индикатор загрузки
- Обновляются данные в таблице
- Появляется уведомление о завершении

**Q: Можно ли обрабатывать несколько файлов одновременно?**
A: Нет, приложение работает только с одним отчетом за раз. Для уведомлений можно загружать несколько файлов.

**Q: Как проверить правильность обработки?**
A: 
- Сравните данные до и после обработки
- Проверьте суммы и расчеты
- Убедитесь, что нет ошибок в консоли браузера

## Решение проблем

### Проблемы с загрузкой

**Проблема:** Файл не загружается
**Решение:**
1. Проверьте формат файла (должен быть XML)
2. Убедитесь, что файл не поврежден
3. Проверьте размер файла (не более 10MB)
4. Обновите страницу и попробуйте снова

**Проблема:** Данные отображаются некорректно
**Решение:**
1. Проверьте кодировку файла (должна быть windows-1251)
2. Убедитесь, что файл экспортирован из 1С корректно
3. Проверьте структуру XML-файла

### Проблемы с обработкой

**Проблема:** Функция не работает
**Решение:**
1. Обновите страницу
2. Перезагрузите файл
3. Проверьте консоль браузера на наличие ошибок
4. Попробуйте другой браузер

**Проблема:** Медленная обработка
**Решение:**
1. Закройте другие вкладки браузера
2. Проверьте размер файла
3. Убедитесь, что компьютер не перегружен

### Проблемы с сохранением

**Проблема:** Файл не сохраняется
**Решение:**
1. Проверьте настройки браузера для загрузок
2. Убедитесь, что есть место на диске
3. Попробуйте другую папку для сохранения

**Проблема:** Файл сохраняется в неправильной кодировке
**Решение:**
1. Используйте функцию "Скачать отчет" вместо копирования
2. Проверьте настройки текстового редактора
3. Убедитесь, что файл открывается в программе, поддерживающей windows-1251

### Получение помощи

Если проблема не решается:

1. **Проверьте документацию:** Изучите техническую документацию
2. **Поиск в Issues:** Проверьте открытые и закрытые вопросы на GitHub
3. **Создайте Issue:** Опишите проблему подробно с примерами
4. **Обратитесь к разработчику:** Напишите на oglenyaboss@icloud.com

При обращении укажите:
- Версию браузера
- Операционную систему
- Размер и тип файла
- Подробное описание проблемы
- Шаги для воспроизведения
- Скриншоты (если применимо)
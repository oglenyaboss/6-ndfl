(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5461:function(e,t,s){Promise.resolve().then(s.bind(s,3494))},3494:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return z}});var n=s(7437),r=s(2265),l=s(609),a=s(9242),o=()=>{let e=["M47.4,-34.9C61.2,-20.5,71.9,-0.8,67.2,13.5C62.5,27.8,42.3,36.8,21.3,48.5C0.4,60.2,-21.3,74.7,-38.7,70.2C-56,65.7,-69.1,42.2,-73,18.5C-77,-5.2,-71.7,-29.1,-58,-43.5C-44.3,-57.9,-22.1,-62.8,-2.7,-60.6C16.8,-58.5,33.6,-49.3,47.4,-34.9Z","M45.5,-40.3C56.7,-22.2,62.1,-3.4,59.1,15C56.1,33.5,44.8,51.6,27.5,61.7C10.2,71.8,-13.1,73.8,-34.8,65.8C-56.5,57.8,-76.5,39.9,-79.5,20.1C-82.5,0.3,-68.4,-21.5,-52.3,-40.7C-36.2,-59.9,-18.1,-76.4,-0.5,-76.1C17.1,-75.7,34.3,-58.3,45.5,-40.3Z","M50.8,-38.4C64.3,-23.6,72.6,-2.5,70.5,19.7C68.3,42,55.6,65.6,38.2,70.7C20.7,75.8,-1.5,62.5,-23.7,51.1C-45.9,39.6,-68.1,30.1,-76.6,12C-85.1,-6.1,-80,-32.9,-64.9,-48C-49.9,-63.2,-24.9,-66.8,-3.1,-64.3C18.6,-61.8,37.3,-53.2,50.8,-38.4Z","M58.7,-47.5C67.1,-36.2,58.9,-12.3,53.1,11.5C47.2,35.4,43.5,59.1,28,72C12.4,84.8,-15.1,86.7,-35,75.9C-54.8,65.1,-67,41.6,-71.2,17.8C-75.5,-6.1,-71.8,-30.2,-58.6,-42.6C-45.4,-55.1,-22.7,-55.8,1.2,-56.8C25.1,-57.7,50.2,-58.9,58.7,-47.5Z","M54.1,-45.3C63.3,-31.6,59.3,-9.5,52.6,8.9C45.9,27.2,36.5,41.8,23.1,48.4C9.7,55,-7.7,53.7,-24.2,47C-40.7,40.3,-56.1,28.3,-63.3,10.6C-70.4,-7.2,-69.2,-30.7,-57.2,-45.1C-45.3,-59.4,-22.7,-64.6,-0.1,-64.6C22.4,-64.5,44.9,-59.1,54.1,-45.3Z"],[t]=r.useState(e[Math.floor(Math.random()*e.length)]),s=(0,l.c)(Math.random()*window.innerWidth),o=(0,l.c)(Math.random()*window.innerHeight),i=(0,l.c)((Math.random()-.5)*10),d=(0,l.c)((Math.random()-.5)*10),c=(0,l.c)(360*Math.random()),u=(0,l.c)((Math.random()-.5)*1);return r.useEffect(()=>{let e=s.onChange(e=>{(e<-window.innerWidth/2||e>window.innerWidth)&&i.set(-i.get())}),t=o.onChange(e=>{(e<-window.innerHeight/2||e>window.innerHeight/2)&&d.set(-d.get())});return()=>{e(),t()}},[]),r.useEffect(()=>{let e=setInterval(()=>{s.set(s.get()+i.get()),o.set(o.get()+d.get()),c.set((c.get()+u.get())%360)},1e3/60);return()=>clearInterval(e)},[]),(0,n.jsx)(a.E.svg,{viewBox:"0 0 200 200",xmlns:"http://www.w3.org/2000/svg",className:"absolute",style:{x:s,y:o,rotate:c,scale:.5},children:(0,n.jsx)(a.E.path,{d:t,fill:"#FA4D56",transform:"translate(100 100)",scale:.5})})},i=s(7042),d=s(4769);function c(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,d.m6)((0,i.W)(t))}let u=r.forwardRef((e,t)=>{let{className:s,type:r,...l}=e;return(0,n.jsx)("input",{type:r,className:c("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...l})});u.displayName="Input";var f=s(7256);let h=(0,s(9213).j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),g=r.forwardRef((e,t)=>{let{className:s,variant:r,size:l,asChild:a=!1,...o}=e,i=a?f.g7:"button";return(0,n.jsx)(i,{className:c(h({variant:r,size:l,className:s})),ref:t,...o})});g.displayName="Button";var m=s(1424),x=s(2920);let w=e=>{let{shouldScaleBackground:t=!0,...s}=e;return(0,n.jsx)(x.d.Root,{shouldScaleBackground:t,...s})};w.displayName="Drawer";let p=x.d.Trigger,v=x.d.Portal,b=x.d.Close,j=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)(x.d.Overlay,{ref:t,className:c("fixed inset-0 z-50 bg-black/80",s),...r})});j.displayName=x.d.Overlay.displayName;let C=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,n.jsxs)(v,{children:[(0,n.jsx)(j,{}),(0,n.jsxs)(x.d.Content,{ref:t,className:c("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",s),...l,children:[(0,n.jsx)("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),r]})]})});C.displayName="DrawerContent";let y=e=>{let{className:t,...s}=e;return(0,n.jsx)("div",{className:c("grid gap-1.5 p-4 text-center sm:text-left",t),...s})};y.displayName="DrawerHeader";let N=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)(x.d.Title,{ref:t,className:c("text-lg font-semibold leading-none tracking-tight",s),...r})});N.displayName=x.d.Title.displayName;let $=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)(x.d.Description,{ref:t,className:c("text-sm text-muted-foreground",s),...r})});$.displayName=x.d.Description.displayName;let k=s(2831),M=new k.Builder({xmldec:{version:"1.0",encoding:"windows-1251"}}),R=new k.Parser;async function S(e,t){let s=await R.parseStringPromise(e),n=await R.parseStringPromise(t),r=s["Файл"]["Документ"][0]["НДФЛ6.2"][0]["СправДох"],l=n["Файл"]["Документ"][0]["НДФЛ6.2"][0]["СправДох"],a=parseInt(r[r.length-1].$["НомСпр"]);l.forEach((e,t)=>{e.$["НомСпр"]=(a+t+1).toString()});let o=r.concat(l);return s["Файл"]["Документ"][0]["НДФЛ6.2"][0]["СправДох"]=o,M.buildObject(s)}async function E(e){console.log("started");let t=await R.parseStringPromise(e),s=null==t?void 0:t["Файл"]["Документ"][0]["НДФЛ6.2"][0]["РасчСумНал"][0],n=s.$["СумНалИсч"],r=s.$["СумНалВозвр"];"0"===r?s.$["СумНалУдерж"]=n:(m.toast.warning("Сумма налога к возврату не равна нулю, проверьте удержанный налог!"),s.$["СумНалУдерж"]=+n+ +r),s.$["СумНалНеУдерж"]=0,s.$["СумНалИзлУдерж"]=0;let l=t["Файл"]["Документ"][0]["НДФЛ6.2"][0]["СправДох"];return console.log(l),l.forEach(e=>{let t=e["СведДох"],s=t[0]["СумИтНалПер"][0].$["НалИсчисл"],n=t[0]["СумИтНалПер"][0].$["НалВозвр"];console.log(s),0===n||void 0===n?(t[0]["СумИтНалПер"][0].$["НалУдерж"]=s,t[0]["СумИтНалПер"][0].$["НалУдержЛиш"]=0,console.log(n)):(m.toast.warning("Сумма налога к возврату не равна нулю, проверьте удержанный налог в 2-ндфл!"),t[0]["СумИтНалПер"][0].$["НалУдерж"]=+s+ +n,t[0]["СумИтНалПер"][0].$["НалУдержЛиш"]=0)}),M.buildObject(t)}async function F(e){let t=await R.parseStringPromise(e),s=null==t?void 0:t["Файл"]["Документ"][0]["НДФЛ6.2"][0]["СправДох"];return console.log(s),s.forEach(e=>{let t;let s=e["СведДох"][0]["ДохВыч"][0]["СвСумДох"],n=e["ПолучДох"][0]["ФИО"][0].$;do t=!1,s.forEach(e=>{let r=parseFloat(e.$["СумДоход"]),l=e.$["КодДоход"];if(r<0){let a=s.findIndex(e=>e.$["КодДоход"]===l&&parseFloat(e.$["СумДоход"])>0);if(-1!==a){let n=parseFloat(s[a].$["СумДоход"])+r;s[a].$["СумДоход"]=n.toFixed(2),0===n&&s.splice(a,1),e.$["СумДоход"]="0",t=!0}else console.log("Не найден код дохода для ".concat(n["Фамил"],", ").concat(n["Имя"],", ").concat(n["Отчество"])),m.toast.warning("Не найден код дохода для ".concat(n["Фамилия"],", ").concat(n["Имя"],", ").concat(n["Отчество"]))}});while(t);e["СведДох"][0]["ДохВыч"][0]["СвСумДох"]=s.filter(e=>0!==parseFloat(e.$["СумДоход"]))}),M.buildObject(t)}var z=()=>{let[e,t]=r.useState(null),[s,l]=r.useState(null),[a,i]=r.useState(null);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("svg",{style:{visibility:"hidden",position:"absolute"},children:(0,n.jsxs)("filter",{id:"glass",children:[(0,n.jsx)("feTurbulence",{type:"fractalNoise",baseFrequency:"0.01",numOctaves:"1",result:"warp"}),(0,n.jsx)("feDisplacementMap",{xChannelSelector:"R",yChannelSelector:"G",scale:"50",in:"SourceGraphic",in2:"warp"}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"1"})]})}),(0,n.jsxs)("div",{className:"flex justify-center items-center h-screen overflow-hidden w-screen glass-effect flex-col",children:[(0,n.jsxs)(w,{children:[(0,n.jsx)(p,{children:(0,n.jsx)(g,{className:"z-10 m-4",asChild:!0,children:(0,n.jsx)("span",{className:"text-white",children:"Объединить отчеты"})})}),(0,n.jsxs)(C,{children:[(0,n.jsx)(b,{children:(0,n.jsx)("span",{className:"text-white",children:"Закрыть"})}),(0,n.jsxs)(y,{children:[(0,n.jsx)(N,{children:"Объеденение"}),(0,n.jsx)($,{children:"В данном разделе вы можете объединить 2-ндфл и 6-ндфл в один файл"}),(0,n.jsx)(u,{className:"w-1/2",onChange:e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t.item(0);if(s){let e=new FileReader;e.onload=e=>{var t;let s=null===(t=e.target)||void 0===t?void 0:t.result;l(s),console.log(s),m.toast.success("Файл загружен")},e.readAsText(s,"windows-1251")}},type:"file"}),(0,n.jsx)(u,{className:"w-1/2",onChange:e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t.item(0);if(s){let e=new FileReader;e.onload=e=>{var t;let s=null===(t=e.target)||void 0===t?void 0:t.result;i(s),console.log(s),m.toast.success("Файл загружен")},e.readAsText(s,"windows-1251")}},type:"file"}),(0,n.jsx)(g,{className:"z-10 m-4",disabled:!s||!a,onClick:()=>{try{S(s,a).then(e=>{console.log(e),t(e)})}catch(e){m.toast.error("Ошибка при обработке файла"),console.log(e)}finally{m.toast.success("Файл обработан")}},children:(0,n.jsx)("span",{className:"text-white",children:"Объединить файлы"})})]})]})]}),(0,n.jsx)(o,{},1),(0,n.jsx)(o,{},2),(0,n.jsx)(o,{},3),(0,n.jsx)(o,{},4),(0,n.jsx)(o,{},5),(0,n.jsx)(g,{className:"z-10 m-4",disabled:!e,onClick:()=>{try{E(e).then(e=>{console.log(e),t(e)})}catch(e){m.toast.error("Ошибка при обработке файла"),console.log(e)}finally{m.toast.success("Файл обработан")}},children:(0,n.jsx)("span",{className:"text-white",children:"Выровнять удержанный"})}),(0,n.jsx)(g,{className:"z-10 m-4",disabled:!e,onClick:()=>{try{F(e).then(e=>{console.log(e),t(e)})}catch(e){m.toast.error("Ошибка при обработке файла"),console.log(e)}finally{m.toast.success("Файл обработан")}},children:(0,n.jsx)("span",{className:"text-white",children:"Выровнять доходы"})}),e&&(0,n.jsx)(g,{className:"z-10 m-4",onClick:()=>{let t=new Blob([e],{type:"text/plain"}),s=document.createElement("a");s.href=window.URL.createObjectURL(t),s.download="ndfl.xml",s.click()},children:(0,n.jsx)("span",{className:"text-white",children:"Скачать"})}),(0,n.jsx)(u,{className:"z-10 w-1/4",type:"file",onChange:e=>{var s;let n=null===(s=e.target.files)||void 0===s?void 0:s.item(0);if(n){let e=new FileReader;e.onload=e=>{var s;let n=null===(s=e.target)||void 0===s?void 0:s.result;t(n),console.log(n),m.toast.success("Файл загружен")},e.readAsText(n,"windows-1251")}}})]})]})}}},function(e){e.O(0,[424,612,971,938,744],function(){return e(e.s=5461)}),_N_E=e.O()}]);